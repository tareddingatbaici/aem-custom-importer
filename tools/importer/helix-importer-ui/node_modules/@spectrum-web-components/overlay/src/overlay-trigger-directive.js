"use strict";import{nothing as g,render as m}from"@spectrum-web-components/base";import{directive as v}from"lit/async-directive.js";import{Overlay as p,strategies as O}from"./Overlay.js";import"../sp-overlay.js";import{removeSlottableRequest as h}from"./slottable-request-event.js";import{SlottableRequestDirective as y}from"./slottable-request-directive.js";export class OverlayTriggerDirective extends y{constructor(){super(...arguments);this.overlay=new p;this.defaultOptions={triggerInteraction:"click",overlayOptions:{placement:"top-start",type:"auto",offset:0}};this.options={...this.defaultOptions.overlayOptions}}render(t,r){return g}update(t,[r,e]){var s,a,l;this.options={...this.defaultOptions.overlayOptions,...e==null?void 0:e.overlayOptions},this.insertionOptions=e==null?void 0:e.insertionOptions,this.template=r;let i=!1;const n=(e==null?void 0:e.triggerInteraction)||this.defaultOptions.triggerInteraction,o=((s=this.strategy)==null?void 0:s.type)!==n;this.target!==t.element&&(this.target=t.element,i=!0),(i||o)&&((a=this.strategy)==null||a.abort(),this.strategy=new O[n](this.overlay,this.target,!0)),this.listenerHost=this.overlay,this.init(),this.overlay.open=(l=e==null?void 0:e.open)!=null?l:!1}handleSlottableRequest(t){var e,i;if(t.target!==t.currentTarget)return;const r=t.data===h;if(m(r?void 0:this.template(),this.overlay),r)this.overlay.remove();else{p.applyOptions(this.overlay,{...this.options,trigger:this.target});const n=typeof((e=this.insertionOptions)==null?void 0:e.el)=="function"?this.insertionOptions.el():((i=this.insertionOptions)==null?void 0:i.el)||this.target,{where:o="afterend"}=this.insertionOptions||{};n.insertAdjacentElement(o,this.overlay)}}}export const trigger=v(OverlayTriggerDirective);
//# sourceMappingURL=overlay-trigger-directive.js.map
